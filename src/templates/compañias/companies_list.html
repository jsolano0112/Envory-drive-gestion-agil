{% extends "base.html" %}

{% block title %}Gesti칩n de Compa침칤as - EVORY DRIVE{% endblock %}

{% block page_title %}
Gesti칩n de Compa침칤as 游끽
{% endblock %}

{% block page_subtitle %}
Selecciona una compa침칤a para ver detalles, clientes y generar reportes
{% endblock %}

{% block content %}
<section class="mb-8">
    <div class="bg-white rounded-lg shadow-md p-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800">Compa침칤as Registradas</h2>
            <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full font-semibold">
                Total: {{ companias|length }}
            </span>
        </div>

        {% if companias %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for compania in companias %}
            <a href="{% url 'company_detail' compania.id %}" 
               class="block bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 hover:border-blue-400 rounded-lg p-6 transition-all duration-300 transform hover:scale-105 hover:shadow-xl">
                <!-- Icono y Estado -->
                <div class="flex justify-between items-start mb-4">
                    <div class="bg-blue-600 rounded-full p-3">
                        <i class="fas fa-building text-white text-2xl"></i>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-semibold 
                        {% if compania.estado_cuenta == 'Activa' %}
                            bg-green-100 text-green-800
                        {% elif compania.estado_cuenta == 'Suspendida' %}
                            bg-yellow-100 text-yellow-800
                        {% elif compania.estado_cuenta == 'Morosa' %}
                            bg-red-100 text-red-800
                        {% else %}
                            bg-gray-100 text-gray-800
                        {% endif %}">
                        {{ compania.estado_cuenta }}
                    </span>
                </div>

                <!-- Nombre de la Compa침칤a -->
                <h3 class="text-xl font-bold text-gray-800 mb-2 truncate" title="{{ compania.nombre }}">
                    {{ compania.nombre }}
                </h3>

                <!-- Informaci칩n B치sica -->
                <div class="space-y-2 mb-4">
                    <p class="text-sm text-gray-600">
                        <i class="fas fa-id-card text-blue-600 w-5"></i>
                        <span class="font-semibold">NIT:</span> {{ compania.nit }}
                    </p>
                    
                    {% if compania.razon_social %}
                    <p class="text-sm text-gray-600 truncate" title="{{ compania.razon_social }}">
                        <i class="fas fa-file-contract text-blue-600 w-5"></i>
                        <span class="font-semibold">Raz칩n Social:</span> {{ compania.razon_social }}
                    </p>
                    {% endif %}

                    {% if compania.telefono %}
                    <p class="text-sm text-gray-600">
                        <i class="fas fa-phone text-green-600 w-5"></i>
                        {{ compania.telefono }}
                    </p>
                    {% endif %}

                    {% if compania.email_corporativo %}
                    <p class="text-sm text-gray-600 truncate" title="{{ compania.email_corporativo }}">
                        <i class="fas fa-envelope text-red-600 w-5"></i>
                        {{ compania.email_corporativo }}
                    </p>
                    {% endif %}
                </div>

                <!-- Bot칩n de Acci칩n -->
                <div class="flex items-center justify-between pt-4 border-t border-blue-200">
                    <span class="text-sm text-gray-600">
                        <i class="fas fa-users text-purple-600 mr-1"></i>
                        {{ compania.clientes.all|length }} clientes
                    </span>
                    <span class="text-blue-600 font-semibold text-sm">
                        Ver detalles <i class="fas fa-arrow-right ml-1"></i>
                    </span>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-building text-gray-300 text-6xl mb-4"></i>
            <p class="text-gray-600 text-lg">No hay compa침칤as registradas en el sistema</p>
            <p class="text-gray-500 text-sm mt-2">Las compa침칤as aparecer치n aqu칤 una vez sean creadas</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Bot칩n de regreso -->
<section class="mb-8">
    <a href="{% url 'home' %}" 
       class="inline-flex items-center bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition">
        <i class="fas fa-arrow-left mr-2"></i>
        Volver al Inicio
    </a>
</section>
{% endblock %}

